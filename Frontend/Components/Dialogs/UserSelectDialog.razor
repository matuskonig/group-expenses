@using Frontend.Providers
@using Entities.AuthDto
@using Entities.GroupDto
@using Frontend.Components.Forms
@using Frontend.Services
@inject GroupService _groupService

<OpenableDialog>
    <Opener>
        <button @onclick="@context.OpenDialog">@OpenerTitle</button>
    </Opener>
    <Title>
        <h3>@DialogTitle</h3>
    </Title>
    <ChildContent>
        <UserSelectForm
            OnSubmit="user => HandleSubmit(user, context)"
            Users="@Users"
            SelectedUserId="@SelectedUserId"/>
    </ChildContent>
</OpenableDialog>

@code {

    [Parameter]
    public string OpenerTitle { get; set; }

    [Parameter]
    public string DialogTitle { get; set; }

    [Parameter]
    public IEnumerable<UserDto> Users { get; set; }

    [Parameter]
    public string SelectedUserId { get; set; }

    [Parameter]
    public EventCallback<UserDto> OnSubmit { get; set; }

    private async Task HandleSubmit(UserDto user, OpenableDialog context)
    {
        await OnSubmit.InvokeAsync(user);
        context.CloseDialog();
    }

}